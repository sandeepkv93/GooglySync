repos:
  - repo: local
    hooks:
      - id: gofmt
        name: gofmt
        entry: gofmt -w
        language: system
        types: [go]
      - id: go-vet
        name: go vet
        entry: go vet ./...
        language: system
        pass_filenames: false
        env:
          GOCACHE: /tmp/googlysync-go-build
      - id: golangci-lint
        name: golangci-lint
        entry: golangci-lint run
        language: system
        pass_filenames: false
        env:
          GOCACHE: /tmp/googlysync-go-build
          GOLANGCI_LINT_CACHE: .cache/golangci-lint
      - id: buf-lint
        name: buf lint
        entry: buf lint
        language: system
        pass_filenames: false
      - id: wire-check
        name: wire:check
        entry: task wire:check
        language: system
        pass_filenames: false
      - id: bazel-build
        name: bazel:build (manual)
        entry: task bazel:build
        language: system
        pass_filenames: false
        stages: [manual]
